<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>Render Toolbox 3: Batch Renderer</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Render Toolbox 3
   &#160;<span id="projectnumber">v0.2</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Batch Renderer</div>  </div>
</div><!--header-->
<div class="contents">

<p>Render scenes multiple times with changing variables.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga75329aa7d119f013d4728de396a4296f"><td class="memItemLeft" align="right" valign="top">outFiles&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___batch_render.html#ga75329aa7d119f013d4728de396a4296f">BatchRender</a> (sceneFile, conditionsFile, mappingsFile, hints)</td></tr>
<tr class="memdesc:ga75329aa7d119f013d4728de396a4296f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Render a scene multiple times, with changing varibles.  <a href="#ga75329aa7d119f013d4728de396a4296f">More...</a><br/></td></tr>
<tr class="separator:ga75329aa7d119f013d4728de396a4296f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga190c6aa944cd93e93e37b30295c68ac2"><td class="memItemLeft" align="right" valign="top">hints&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___batch_render.html#ga190c6aa944cd93e93e37b30295c68ac2">GetDefaultHints</a> (hints)</td></tr>
<tr class="memdesc:ga190c6aa944cd93e93e37b30295c68ac2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get default hints to pass to the batch renderer.  <a href="#ga190c6aa944cd93e93e37b30295c68ac2">More...</a><br/></td></tr>
<tr class="separator:ga190c6aa944cd93e93e37b30295c68ac2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaab50f49377da2cd26aae23a6f473b7b6"><td class="memItemLeft" align="right" valign="top">SRGBMontage XYZMontage&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___batch_render.html#gaab50f49377da2cd26aae23a6f473b7b6">MakeMontage</a> (inFiles, outFile, toneMapFactor, isScale, hints)</td></tr>
<tr class="memdesc:gaab50f49377da2cd26aae23a6f473b7b6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Condense several multi-spectral images into one sRGB montage.  <a href="#gaab50f49377da2cd26aae23a6f473b7b6">More...</a><br/></td></tr>
<tr class="separator:gaab50f49377da2cd26aae23a6f473b7b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6c290c8cff25bcfa2b66d4c1d846c48c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___batch_render.html#ga6c290c8cff25bcfa2b66d4c1d846c48c">ApplySceneDOMPaths</a> (idMap, mappings)</td></tr>
<tr class="memdesc:ga6c290c8cff25bcfa2b66d4c1d846c48c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Modify a scene document with a mapping.  <a href="#ga6c290c8cff25bcfa2b66d4c1d846c48c">More...</a><br/></td></tr>
<tr class="separator:ga6c290c8cff25bcfa2b66d4c1d846c48c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga76d4597954b5a5fe4a41cfaa296c4063"><td class="memItemLeft" align="right" valign="top">names values&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___batch_render.html#ga76d4597954b5a5fe4a41cfaa296c4063">ParseConditions</a> (conditionsFile)</td></tr>
<tr class="memdesc:ga76d4597954b5a5fe4a41cfaa296c4063"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read conditions data from a text file.  <a href="#ga76d4597954b5a5fe4a41cfaa296c4063">More...</a><br/></td></tr>
<tr class="separator:ga76d4597954b5a5fe4a41cfaa296c4063"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad4aefeb241a41d1c6c9ba06c75835cc9"><td class="memItemLeft" align="right" valign="top">mappings&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___batch_render.html#gad4aefeb241a41d1c6c9ba06c75835cc9">ParseMappings</a> (mappingsFile)</td></tr>
<tr class="memdesc:gad4aefeb241a41d1c6c9ba06c75835cc9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read mappings data from a text file.  <a href="#gad4aefeb241a41d1c6c9ba06c75835cc9">More...</a><br/></td></tr>
<tr class="separator:gad4aefeb241a41d1c6c9ba06c75835cc9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6fd2d45acff1c8042483a4dca9902019"><td class="memItemLeft" align="right" valign="top">conditionsFile&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___batch_render.html#ga6fd2d45acff1c8042483a4dca9902019">WriteConditionsFile</a> (conditionsFile, names, values)</td></tr>
<tr class="memdesc:ga6fd2d45acff1c8042483a4dca9902019"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write conditions data to a text file.  <a href="#ga6fd2d45acff1c8042483a4dca9902019">More...</a><br/></td></tr>
<tr class="separator:ga6fd2d45acff1c8042483a4dca9902019"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gababf809f1bdb7e2b3f84f927481acd22"><td class="memItemLeft" align="right" valign="top">mappingsFile&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___batch_render.html#gababf809f1bdb7e2b3f84f927481acd22">WriteDefaultMappingsFile</a> (colladaFile, mappingsFile, includeFile, reflectances, lightSpectra, excludePattern)</td></tr>
<tr class="memdesc:gababf809f1bdb7e2b3f84f927481acd22"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write a default mappings file for the given Collada scene file.  <a href="#gababf809f1bdb7e2b3f84f927481acd22">More...</a><br/></td></tr>
<tr class="separator:gababf809f1bdb7e2b3f84f927481acd22"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8f25d5e7d626cbbb1fc953df7fea5231"><td class="memItemLeft" align="right" valign="top">mappedScene mappedAdjust&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___batch_render.html#ga8f25d5e7d626cbbb1fc953df7fea5231">WriteMappedSceneFiles</a> (workingPath, name, originalScene, originalAdjust, mappings, varNames, varValues, hints)</td></tr>
<tr class="memdesc:ga8f25d5e7d626cbbb1fc953df7fea5231"><td class="mdescLeft">&#160;</td><td class="mdescRight">Apply condition values and mappings to scene and adjustments files.  <a href="#ga8f25d5e7d626cbbb1fc953df7fea5231">More...</a><br/></td></tr>
<tr class="separator:ga8f25d5e7d626cbbb1fc953df7fea5231"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Render scenes multiple times with changing variables. </p>
<p>These functions make up the RenderToolox3 batch renderer, which can render the same basic scene multiple times, with changing variables. Users should not use most of these functions directly. Just use the <a class="el" href="group___batch_render.html#ga75329aa7d119f013d4728de396a4296f" title="Render a scene multiple times, with changing varibles.">BatchRender()</a> and <a class="el" href="group___batch_render.html#gaab50f49377da2cd26aae23a6f473b7b6" title="Condense several multi-spectral images into one sRGB montage.">MakeMontage()</a> functions. </p>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga75329aa7d119f013d4728de396a4296f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">outFiles BatchRender </td>
          <td>(</td>
          <td class="paramtype">sceneFile&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">conditionsFile&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">mappingsFile&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">hints&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Render a scene multiple times, with changing varibles. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sceneFile</td><td>file name or path of a Collada scene file </td></tr>
    <tr><td class="paramname">conditionsFile</td><td>file name or path of a conditions file </td></tr>
    <tr><td class="paramname">mappingsFile</td><td>file name or path of a mappings file </td></tr>
    <tr><td class="paramname">hints</td><td>struct of options for the batch renderer</td></tr>
  </table>
  </dd>
</dl>
<p>Renders a scene multiple times, with variable values changing each time. Uses <a href="group___scene_d_o_m.html">Scene DOM</a> functions and <a href="group___scene_targets.html">Scene Target</a> functions to apply variable values to the Collada <em>sceneFile</em> and renderer-specific adjustments files. Values for each condition come from the given <em>conditionsFile</em>. The <em>mappingsFile</em> specifies how to apply variables to the scene.</p>
<p><em>sceneFile</em> must be a Collada XML scene file. <em>sceneFile</em> may be left empty, if the <em>conditionsFile</em> contains a 'sceneFile' variable.</p>
<p><em>conditionsFile</em> must be a RenderToolbox3 <a href="https://github.com/DavidBrainard/RenderToolbox3/wiki/Conditions-File-Format">Conditions File</a>. <em>conditionsFile</em> may be omitted or left empty, if the scene is to be rendered only once.</p>
<p><em>mappingsFile</em> must be a RenderToolbox3 <a href="https://github.com/DavidBrainard/RenderToolbox3/wiki/Mappings-File-Format">Mappings File</a>. <em>mappingsFile</em> may be omitted or left empty, if the scene is to be rendered only once, or if the <em>conditionsFile</em> contains a 'mappingsFile' variable.</p>
<p><em>hints</em> may be a struct with options that affect the rendering process, as returned from <a class="el" href="group___batch_render.html#ga190c6aa944cd93e93e37b30295c68ac2" title="Get default hints to pass to the batch renderer.">GetDefaultHints()</a>. If <em>hints</em> is omitted, default options are used. <em>hints</em> specifies which renderer to use.</p>
<p>Renders the scene one or more times, and writes a .mat file each time. The .mat file will contain multi-spectral renderer output in two variables:</p>
<ul>
<li>multispectralImage - matrix of multispectral image data with size [height width n]</li>
<li>S - spectral plane description, [start delta n]</li>
</ul>
<p>where height and width are pixel image dimensions and n is the number of spectral bands in the image. See the RenderToolbox3 wikiw for more about <a href="https://github.com/DavidBrainard/RenderToolbox3/wiki/Spectrum-Bands">Spectrum Bands</a>.</p>
<p>The .mat file will also contain variables with data about how the scene was rendered:</p>
<ul>
<li>sceneFile - the given <em>sceneFile</em>, if any</li>
<li>conditionsFile - the given <em>conditionsFile</em>, if any</li>
<li>mappingsFile - the given <em>mappingsFile</em>, if any</li>
<li>hints - the given <em>hints</em> struct, or default hints struct</li>
<li>versionInfo - struct of version information about RenderToolbox3 and its dependencies</li>
</ul>
<p>By default, each .mat file will have the same base name as <em>sceneFile</em>, plus a numeric suffix. If <em>conditionsFile</em> contains an 'imageName' variable, each ouput file be named with the value of 'imageName'.</p>
<p>Returns a cell array of string output file names, or an empty cell if no output.</p>
<p>Usage: outFiles = <a class="el" href="group___batch_render.html#ga75329aa7d119f013d4728de396a4296f" title="Render a scene multiple times, with changing varibles.">BatchRender(sceneFile, conditionsFile, mappingsFile, hints)</a> </p>

<p>References <a class="el" href="group___utilities.html#ga5975f774f66357175082584ecbfda23e">ColladaToMitsuba()</a>, <a class="el" href="group___utilities.html#ga25e2e8e16f2f9c0939ce87f8f5308e85">ColladaToPBRT()</a>, <a class="el" href="group___batch_render.html#ga190c6aa944cd93e93e37b30295c68ac2">GetDefaultHints()</a>, <a class="el" href="group___utilities.html#ga0e8e97a231e368f59ebacab0ad208b42">InitializeRenderToolbox()</a>, <a class="el" href="group___batch_render.html#ga76d4597954b5a5fe4a41cfaa296c4063">ParseConditions()</a>, <a class="el" href="group___batch_render.html#gad4aefeb241a41d1c6c9ba06c75835cc9">ParseMappings()</a>, <a class="el" href="group___readers.html#ga3e3389b35714ba0a7afac464401738a2">ReadDAT()</a>, <a class="el" href="group___readers.html#ga612881ed326c435e0d2edddee80e2268">ReadMultispectralEXR()</a>, <a class="el" href="group___utilities.html#ga4685ad5e37917afc3df4d4cedb41b4d1">RenderToolboxRoot()</a>, <a class="el" href="group___utilities.html#gac44921cd4a059a9cff76d511a2f12c17">RunMitsuba()</a>, <a class="el" href="group___utilities.html#ga2b7ac881a070b506174449577df7c2db">RunPBRT()</a>, <a class="el" href="group___utilities.html#ga85f062a3b942f3d595c7104969957bde">StringToVector()</a>, <a class="el" href="group___collada_to_p_b_r_t.html#gaefbda127cb2832f86d88eac7dc03db74">WriteASCII7BitOnly()</a>, <a class="el" href="group___batch_render.html#ga8f25d5e7d626cbbb1fc953df7fea5231">WriteMappedSceneFiles()</a>, and <a class="el" href="group___scene_d_o_m.html#ga3fb262c636b525c9847903dfede903cf">WriteReducedColladaScene()</a>.</p>

</div>
</div>
<a class="anchor" id="ga190c6aa944cd93e93e37b30295c68ac2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">hints GetDefaultHints </td>
          <td>(</td>
          <td class="paramtype">hints&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get default hints to pass to the batch renderer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hints</td><td>partial struct of batch renderer options (optional)</td></tr>
  </table>
  </dd>
</dl>
<p>Creates a struct of options for the batch renderer to use, or fills in missing parts of a the given <em>hints</em> struct. Batch renderer options include things like renderer name, image film size, and whether or not to delete intermediate files used in the batch rendering process.</p>
<p>If provided, <em>hints</em> should be a struct of renderer options with option names as fields. Fills in any missing options with default values. If <em>hints</em> is missing or not a struct, creates a new struct with all default values.</p>
<p>Hints can also be set using the global variable RENDER_TOOBLOX3_HINTS. If it exists, RENDER_TOOBLOX3_HINTS should be a full or partial struct of renderer options with the same fields as <em>hints</em>. The returned struct will contain, in order of preference, values in the given <em>hints</em>, values in RENDER_TOOBLOX3_HINTS, or default values.</p>
<p>Returns a new or modified struct of batch renderer options. output.</p>
<p>Usage: hints = <a class="el" href="group___batch_render.html#ga190c6aa944cd93e93e37b30295c68ac2" title="Get default hints to pass to the batch renderer.">GetDefaultHints(hints)</a> </p>

<p>References <a class="el" href="group___utilities.html#ga5f96738ec56da51605cc8c257113b633">IsStructFieldPresent()</a>, and <a class="el" href="group___utilities.html#ga4685ad5e37917afc3df4d4cedb41b4d1">RenderToolboxRoot()</a>.</p>

<p>Referenced by <a class="el" href="group___batch_render.html#ga75329aa7d119f013d4728de396a4296f">BatchRender()</a>, <a class="el" href="group___utilities.html#ga5975f774f66357175082584ecbfda23e">ColladaToMitsuba()</a>, <a class="el" href="group___utilities.html#ga25e2e8e16f2f9c0939ce87f8f5308e85">ColladaToPBRT()</a>, <a class="el" href="group___batch_render.html#gaab50f49377da2cd26aae23a6f473b7b6">MakeMontage()</a>, and <a class="el" href="group___collada_to_p_b_r_t.html#ga3799baf4496f0c4811dd32f629141a49">WritePBRTFile()</a>.</p>

</div>
</div>
<a class="anchor" id="gaab50f49377da2cd26aae23a6f473b7b6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SRGBMontage XYZMontage MakeMontage </td>
          <td>(</td>
          <td class="paramtype">inFiles&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">outFile&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">toneMapFactor&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">isScale&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">hints&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Condense several multi-spectral images into one sRGB montage. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">inFiles</td><td>cell array of input .mat file names </td></tr>
    <tr><td class="paramname">outFile</td><td>output montage file name (optional) </td></tr>
    <tr><td class="paramname">toneMapFactor</td><td>how to truncate montage luminance (optional) </td></tr>
    <tr><td class="paramname">isScale</td><td>whether or not to scale montage luminance (optional) </td></tr>
    <tr><td class="paramname">hints</td><td>struct of options for the montage maker</td></tr>
  </table>
  </dd>
</dl>
<p>Condenses several multi-spectral images stored in .mat files into a single sRGB montage. Tiles the input images so that the montage has roughly the same aspect ratio as the input images.</p>
<p>Attempts to conserve system memory by loading only one multi-spectral image at a time.</p>
<p><em>inFiles</em> must be a cell array of .mat file names, each of which must contain multi-spectral renderer output. <a class="el" href="group___batch_render.html#ga75329aa7d119f013d4728de396a4296f" title="Render a scene multiple times, with changing varibles.">BatchRender()</a> returns such a cell array.</p>
<p><em>outFile</em> determines where the montage is saved, and may include a path. The extension of <em>outFile</em> determines how the montage is saved:</p>
<ul>
<li>The default is '.mat', in which case the montage XYZ and sRGB matrices are is saved to a new .mat file</li>
<li>If the extension matches a standard image format, like '.tiff' or '.png', the sRGB image will be saved in that format with Matlab's built-in imwrite().</li>
</ul>
<p>If <em>toneMapFactor</em> is provided and greater than 0, montage luminances will be truncated above this factor times the mean luminance of the entire montage.</p>
<p>If isScale is provided and true, montage luminances will be scaled so that the maximum input luminance matches the maximum possible output luminance.</p>
<p><em>hints</em> may be a struct with options that affect the montage, such as the output folder, as returned from <a class="el" href="group___batch_render.html#ga190c6aa944cd93e93e37b30295c68ac2" title="Get default hints to pass to the batch renderer.">GetDefaultHints()</a>. If <em>hints</em> is omitted, default options are used.</p>
<p>Returns a matrix containing the tone mapped, scaled, sRGB montage with size [height width 3]. Also returns a matrix containing XYZ image data with the same size.</p>
<p>Usage: [SRGBMontage, XYZMontage] = <a class="el" href="group___batch_render.html#gaab50f49377da2cd26aae23a6f473b7b6" title="Condense several multi-spectral images into one sRGB montage.">MakeMontage(inFiles, outFile, toneMapFactor, isScale, hints)</a> </p>

<p>References <a class="el" href="group___batch_render.html#ga190c6aa944cd93e93e37b30295c68ac2">GetDefaultHints()</a>, <a class="el" href="group___utilities.html#ga64002a45dee0811174be1712c34aa622">MultispectralToSRGB()</a>, and <a class="el" href="group___utilities.html#ga2b55d3b495580178e7753e3fb06f2db7">XYZToSRGB()</a>.</p>

</div>
</div>
<a class="anchor" id="ga6c290c8cff25bcfa2b66d4c1d846c48c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ApplySceneDOMPaths </td>
          <td>(</td>
          <td class="paramtype">idMap&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">mappings&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Modify a scene document with a mapping. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">idMap</td><td></td></tr>
    <tr><td class="paramname">mappings</td><td></td></tr>
  </table>
  </dd>
</dl>
<p>Modify the document represented by the given <em>idMap</em>, with the given <em>mappings</em>. <em>mappings</em> must be a struct array of mappings data as returned from <a class="el" href="group___batch_render.html#gad4aefeb241a41d1c6c9ba06c75835cc9" title="Read mappings data from a text file.">ParseMappings()</a>. The mappings should contain Scene DOM paths on the left-hand side.</p>
<p>Creates document nodes as needed, to satisfy the left-hand Scene DOM paths.</p>
<p>Used internally by <a class="el" href="group___batch_render.html#ga75329aa7d119f013d4728de396a4296f" title="Render a scene multiple times, with changing varibles.">BatchRender()</a>.</p>
<p>Usage: <a class="el" href="group___batch_render.html#ga6c290c8cff25bcfa2b66d4c1d846c48c" title="Modify a scene document with a mapping.">ApplySceneDOMPaths(idMap, mappings)</a> </p>

<p>References <a class="el" href="group___scene_d_o_m.html#gac6eadc7ec17e780767927372b426d8f0">CreateElementChild()</a>, <a class="el" href="group___scene_d_o_m.html#gaeb3e0c9833c69bae7081da2264fde82d">PathStringToCell()</a>, and <a class="el" href="group___scene_d_o_m.html#ga1d555864c247110212a319cb8a43e731">SetSceneValue()</a>.</p>

</div>
</div>
<a class="anchor" id="ga76d4597954b5a5fe4a41cfaa296c4063"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">names values ParseConditions </td>
          <td>(</td>
          <td class="paramtype">conditionsFile&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read conditions data from a text file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">conditionsFile</td><td></td></tr>
  </table>
  </dd>
</dl>
<p>Reads batch renderer condition variables from the given <em>conditionsFile</em>. See the RenderToolbox3 wiki for more about <a href="https://github.com/DavidBrainard/RenderToolbox3/wiki/Conditions-File-Format">Conditions Files</a>.</p>
<p>Returns a 1 x n cell array of string variable names from the first line of <em>conditionsFile</em>. Also returns an m x n cell array of varible values, with m values per variable.</p>
<p>Used internally by <a class="el" href="group___batch_render.html#ga75329aa7d119f013d4728de396a4296f" title="Render a scene multiple times, with changing varibles.">BatchRender()</a>.</p>
<p>Usage: [names, values] = <a class="el" href="group___batch_render.html#ga76d4597954b5a5fe4a41cfaa296c4063" title="Read conditions data from a text file.">ParseConditions(conditionsFile)</a> </p>

<p>Referenced by <a class="el" href="group___batch_render.html#ga75329aa7d119f013d4728de396a4296f">BatchRender()</a>.</p>

</div>
</div>
<a class="anchor" id="gad4aefeb241a41d1c6c9ba06c75835cc9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">mappings ParseMappings </td>
          <td>(</td>
          <td class="paramtype">mappingsFile&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read mappings data from a text file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mappingsFile</td><td></td></tr>
  </table>
  </dd>
</dl>
<p>Reads batch renderer mappings from the given <em>mappingsFile</em>. See the RenderToolbox3 wiki for more about <a href="https://github.com/DavidBrainard/RenderToolbox3/wiki/Mappings-File-Format">Mappings Files</a>.</p>
<p>Returns a 1xn struct array with mapping data. The struct array will have one element per mapping, and the following fields:</p>
<ul>
<li>text - raw text before parsing</li>
<li>blockType - block type, 'Collada', 'Generic', 'Mitsuba', or 'PBRT'</li>
<li>blockNumber - the order of the block in the mappings file</li>
<li>group - name of a set of related blocks</li>
<li>left - a struct of info about the left-hand string</li>
<li>operator - the operator string</li>
<li>right - a struct of info about the right-hand string</li>
</ul>
<p>Each 'left' or 'right' field will contain a struct with data about a string, with the following fields</p>
<ul>
<li>text - the raw text before parsing</li>
<li>enclosing - the enclosing brackets, if any, '[]', '&lt;&gt;', or ''</li>
<li>value - the text found within enclising brackets</li>
</ul>
<p>Used internally by <a class="el" href="group___batch_render.html#ga75329aa7d119f013d4728de396a4296f" title="Render a scene multiple times, with changing varibles.">BatchRender()</a>.</p>
<p>Usage: mappings = <a class="el" href="group___batch_render.html#gad4aefeb241a41d1c6c9ba06c75835cc9" title="Read mappings data from a text file.">ParseMappings(mappingsFile)</a> </p>

<p>Referenced by <a class="el" href="group___batch_render.html#ga75329aa7d119f013d4728de396a4296f">BatchRender()</a>.</p>

</div>
</div>
<a class="anchor" id="ga6fd2d45acff1c8042483a4dca9902019"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">conditionsFile WriteConditionsFile </td>
          <td>(</td>
          <td class="paramtype">conditionsFile&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">names&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">values&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write conditions data to a text file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">conditionsFile</td><td>name of new text file to write. </td></tr>
    <tr><td class="paramname">names</td><td>1 x n cell array of string variable names </td></tr>
    <tr><td class="paramname">values</td><td>m x n cell array of variable values</td></tr>
  </table>
  </dd>
</dl>
<p>Writes batch renderer condition variables with the given <em>names</em> and <em>values</em> to a new text file with the given <em>conditionsFile</em> name. See the RenderToolbox3 wiki for more about <a href="https://github.com/DavidBrainard/RenderToolbox3/wiki/Conditions-File-Format">Conditions Files</a>.</p>
<p><em>names</em> will appear in the first line of the new file, separated by tabs. Each of the m rows of <em>values</em> will appear in a separate line, with elements separated by tabs. So, the values for each variable will appear in a tab-separated column.</p>
<p>Attempts to convert numeric values to string, as needed.</p>
<p>Usage: conditionsFile = <a class="el" href="group___batch_render.html#ga6fd2d45acff1c8042483a4dca9902019" title="Write conditions data to a text file.">WriteConditionsFile(conditionsFile, names, values)</a> </p>

<p>References <a class="el" href="group___utilities.html#ga4558aa364f8abfc3806cf39d92e762a8">VectorToString()</a>.</p>

</div>
</div>
<a class="anchor" id="gababf809f1bdb7e2b3f84f927481acd22"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">mappingsFile WriteDefaultMappingsFile </td>
          <td>(</td>
          <td class="paramtype">colladaFile&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">mappingsFile&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">includeFile&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">reflectances&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">lightSpectra&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">excludePattern&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write a default mappings file for the given Collada scene file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">colladaFile</td><td>file name or path of the Collada scene file </td></tr>
    <tr><td class="paramname">mappingsFile</td><td>file name or path for a new mappings file </td></tr>
    <tr><td class="paramname">includeFile</td><td>file name or path for a mappings file to include </td></tr>
    <tr><td class="paramname">reflectances</td><td>cell array of matte material reflectances </td></tr>
    <tr><td class="paramname">lightSpectra</td><td>cell array of light source spectra </td></tr>
    <tr><td class="paramname">excludePattern</td><td>regular expression to filter document elements</td></tr>
  </table>
  </dd>
</dl>
<p>Traverses the Collada document in the given <em>colladaFile</em> and writes a new <em>mappingsFile</em> suitable for use with <a class="el" href="group___batch_render.html#ga75329aa7d119f013d4728de396a4296f" title="Render a scene multiple times, with changing varibles.">BatchRender()</a>. The <em>mappingsFile</em> will specify default values, including:</p>
<ul>
<li>mappings text in <em>includeFile</em> or RenderData/DefaultMappings.txt</li>
<li>matte material for each geometry node</li>
<li>a spectrum for each light source</li>
</ul>
<p>Each material or light source will use a spectrum from a default list, or a provided list.</p>
<p>By default, prepends the text of RenderData/DefaultMappings.txt to the new mappings file. If <em>includeFile</em> is provided it must specify another text file to prepend instead.</p>
<p>By default, each matte material will use one of the Color Checker reflectance spectrums found in RenderData/Macbeth-ColorChecker. If <em>reflectances</em> is provided, it must be a cell array of string reflectance values to use instead.</p>
<p>By default, each light source will use the D65 light spectrum found in RenderData/D65.spd. If <em>lightSpectra</em> is provided, it must be a cell array of string spectrum values to use instead.</p>
<p>By default, writes mappings for all materials and light sources. If <em>excludePattern</em> is provided, it must be a regular expression to match against element id attributes. Elements whose ids match <em>excludePattern</em> will be excluded from the <em>mappingsFile</em>.</p>
<p>Returns the name of the new <em>mappingsFile</em>.</p>
<p>Usage: <a class="el" href="group___batch_render.html#gababf809f1bdb7e2b3f84f927481acd22" title="Write a default mappings file for the given Collada scene file.">WriteDefaultMappingsFile(colladaFile, mappingsFile, includeFile, reflectances, lightSpectra, excludePattern)</a> </p>

<p>References <a class="el" href="group___utilities.html#ga1eb02f347a09516ddc66ab6e923106a1">FindFiles()</a>, <a class="el" href="group___scene_d_o_m.html#ga966e02acd861399a589ba524ec1faef7">GetColladaLightType()</a>, <a class="el" href="group___scene_d_o_m.html#ga7fea3cfb6fbbc86c78793a4c26f6e59b">ReadSceneDOM()</a>, <a class="el" href="group___utilities.html#ga4685ad5e37917afc3df4d4cedb41b4d1">RenderToolboxRoot()</a>, <a class="el" href="group___utilities.html#ga85f062a3b942f3d595c7104969957bde">StringToVector()</a>, <a class="el" href="group___collada_to_p_b_r_t.html#gaefbda127cb2832f86d88eac7dc03db74">WriteASCII7BitOnly()</a>, and <a class="el" href="group___scene_d_o_m.html#ga3fb262c636b525c9847903dfede903cf">WriteReducedColladaScene()</a>.</p>

</div>
</div>
<a class="anchor" id="ga8f25d5e7d626cbbb1fc953df7fea5231"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">mappedScene mappedAdjust WriteMappedSceneFiles </td>
          <td>(</td>
          <td class="paramtype">workingPath&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">name&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">originalScene&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">originalAdjust&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">mappings&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">varNames&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">varValues&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">hints&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Apply condition values and mappings to scene and adjustments files. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">workingPath</td><td></td></tr>
    <tr><td class="paramname">name</td><td></td></tr>
    <tr><td class="paramname">originalScene</td><td></td></tr>
    <tr><td class="paramname">originalAdjust</td><td></td></tr>
    <tr><td class="paramname">mappings</td><td></td></tr>
    <tr><td class="paramname">varNames</td><td></td></tr>
    <tr><td class="paramname">varValues</td><td></td></tr>
  </table>
  </dd>
</dl>
<p>Apply variable values and mappings to scene and adjustments files.</p>
<p><em>workingPath</em> must be a folder path name where to put new files. <em>name</em> must be a string name to include in the mapped scene file names.</p>
<p><em>originalScene</em> and <em>originalAdjust</em> must be XML scene and adjustments files, respectively. <em>originalAdjust</em> is optional.</p>
<p>mappings must be a struct array of mapping data as returned from <a class="el" href="group___batch_render.html#gad4aefeb241a41d1c6c9ba06c75835cc9" title="Read mappings data from a text file.">ParseMappings()</a>.</p>
<p><em>varNames</em> and <em>varValues</em> must be cell arrays of variable names and corresponding values, as returned from <a class="el" href="group___batch_render.html#ga76d4597954b5a5fe4a41cfaa296c4063" title="Read conditions data from a text file.">ParseConditions()</a>.</p>
<p><em>hints</em> should be a struct with renderer options. <em>hints.renderer</em> should be the name of a renderer, either 'Mitsuba', or 'PBRT'.</p>
<p>Writes copies of the given <em>originalScene</em> file and <em>originalAdjustments</em> file, and modifies each as specified by the given <em>mappings</em>, <em>varNames</em>, and <em>varValues</em>.</p>
<p>Returns the names of the new, mapped scene file and the new, mapped adjustments file.</p>
<p>Used internally by <a class="el" href="group___batch_render.html#ga75329aa7d119f013d4728de396a4296f" title="Render a scene multiple times, with changing varibles.">BatchRender()</a>.</p>
<p>Usage: [mappedScene, mappedAdjust] = WriteMappedSceneFiles( ... workingPath, name, originalScene, originalAdjust, ... mappings, varNames, varValues, hints) </p>

<p>References <a class="el" href="group___scene_d_o_m.html#ga7fea3cfb6fbbc86c78793a4c26f6e59b">ReadSceneDOM()</a>.</p>

<p>Referenced by <a class="el" href="group___batch_render.html#ga75329aa7d119f013d4728de396a4296f">BatchRender()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Feb 26 2013 14:03:03 for Render Toolbox 3 by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.3.1
</small></address>
</body>
</html>
