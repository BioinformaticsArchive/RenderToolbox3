<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Render Toolbox 3: Batch Renderer</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Render Toolbox 3
   &#160;<span id="projectnumber">v0.2</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Batch Renderer</div>  </div>
</div><!--header-->
<div class="contents">

<p>Render scenes multiple times with changing variables.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga6c290c8cff25bcfa2b66d4c1d846c48c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___batch_renderer.html#ga6c290c8cff25bcfa2b66d4c1d846c48c">ApplySceneDOMPaths</a> (idMap, mappings)</td></tr>
<tr class="memdesc:ga6c290c8cff25bcfa2b66d4c1d846c48c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Modify a scene document with a mapping.  <a href="#ga6c290c8cff25bcfa2b66d4c1d846c48c"></a><br/></td></tr>
<tr class="separator:ga6c290c8cff25bcfa2b66d4c1d846c48c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7e0dd5f1d0caa860e7bc12a6005bccbe"><td class="memItemLeft" align="right" valign="top">outFiles&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___batch_renderer.html#ga7e0dd5f1d0caa860e7bc12a6005bccbe">BatchRender</a> (sceneFiles, hints)</td></tr>
<tr class="memdesc:ga7e0dd5f1d0caa860e7bc12a6005bccbe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Render multiple scenes at once.  <a href="#ga7e0dd5f1d0caa860e7bc12a6005bccbe"></a><br/></td></tr>
<tr class="separator:ga7e0dd5f1d0caa860e7bc12a6005bccbe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga549cc197fbfc7d88e081cfe1c70b7f77"><td class="memItemLeft" align="right" valign="top">pbrtScale mitsubaScale&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___batch_renderer.html#ga549cc197fbfc7d88e081cfe1c70b7f77">ComputeRadiometricScaleFactors</a> ()</td></tr>
<tr class="memdesc:ga549cc197fbfc7d88e081cfe1c70b7f77"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculate scale factors to bring renderer outputs into radiance units.  <a href="#ga549cc197fbfc7d88e081cfe1c70b7f77"></a><br/></td></tr>
<tr class="separator:ga549cc197fbfc7d88e081cfe1c70b7f77"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga190c6aa944cd93e93e37b30295c68ac2"><td class="memItemLeft" align="right" valign="top">hints&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___batch_renderer.html#ga190c6aa944cd93e93e37b30295c68ac2">GetDefaultHints</a> (hints)</td></tr>
<tr class="memdesc:ga190c6aa944cd93e93e37b30295c68ac2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get default hints to pass to the batch renderer.  <a href="#ga190c6aa944cd93e93e37b30295c68ac2"></a><br/></td></tr>
<tr class="separator:ga190c6aa944cd93e93e37b30295c68ac2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaab50f49377da2cd26aae23a6f473b7b6"><td class="memItemLeft" align="right" valign="top">SRGBMontage XYZMontage&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___batch_renderer.html#gaab50f49377da2cd26aae23a6f473b7b6">MakeMontage</a> (inFiles, outFile, toneMapFactor, isScale, hints)</td></tr>
<tr class="memdesc:gaab50f49377da2cd26aae23a6f473b7b6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Condense several multi-spectral images into one sRGB montage.  <a href="#gaab50f49377da2cd26aae23a6f473b7b6"></a><br/></td></tr>
<tr class="separator:gaab50f49377da2cd26aae23a6f473b7b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga837670a7cb23d1a65124a69efb45bc71"><td class="memItemLeft" align="right" valign="top">sceneFiles auxiliaryFiles&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___batch_renderer.html#ga837670a7cb23d1a65124a69efb45bc71">MakeSceneFiles</a> (colladaFile, conditionsFile, mappingsFile, hints, outPath)</td></tr>
<tr class="memdesc:ga837670a7cb23d1a65124a69efb45bc71"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert a Collada file to renderer scene files, with changing varibles.  <a href="#ga837670a7cb23d1a65124a69efb45bc71"></a><br/></td></tr>
<tr class="separator:ga837670a7cb23d1a65124a69efb45bc71"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga25c9b2e360c10155dbef957406a126ed"><td class="memItemLeft" align="right" valign="top">radianceData scaleFactor&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___batch_renderer.html#ga25c9b2e360c10155dbef957406a126ed">MitsubaDataToRadiance</a> (mitsubaData, mitsubaDoc, hints)</td></tr>
<tr class="memdesc:ga25c9b2e360c10155dbef957406a126ed"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert Mitsuba multi-spectral data to radiance units.  <a href="#ga25c9b2e360c10155dbef957406a126ed"></a><br/></td></tr>
<tr class="separator:ga25c9b2e360c10155dbef957406a126ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga76d4597954b5a5fe4a41cfaa296c4063"><td class="memItemLeft" align="right" valign="top">names values&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___batch_renderer.html#ga76d4597954b5a5fe4a41cfaa296c4063">ParseConditions</a> (conditionsFile)</td></tr>
<tr class="memdesc:ga76d4597954b5a5fe4a41cfaa296c4063"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read conditions data from a text file.  <a href="#ga76d4597954b5a5fe4a41cfaa296c4063"></a><br/></td></tr>
<tr class="separator:ga76d4597954b5a5fe4a41cfaa296c4063"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad4aefeb241a41d1c6c9ba06c75835cc9"><td class="memItemLeft" align="right" valign="top">mappings&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___batch_renderer.html#gad4aefeb241a41d1c6c9ba06c75835cc9">ParseMappings</a> (mappingsFile)</td></tr>
<tr class="memdesc:gad4aefeb241a41d1c6c9ba06c75835cc9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read mappings data from a text file.  <a href="#gad4aefeb241a41d1c6c9ba06c75835cc9"></a><br/></td></tr>
<tr class="separator:gad4aefeb241a41d1c6c9ba06c75835cc9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae2618bba0ff8b50e380c740b81d6adf8"><td class="memItemLeft" align="right" valign="top">radianceData scaleFactor&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___batch_renderer.html#gae2618bba0ff8b50e380c740b81d6adf8">PBRTDataToRadiance</a> (pbrtData, pbrtDoc, hints)</td></tr>
<tr class="memdesc:gae2618bba0ff8b50e380c740b81d6adf8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert PBRT multi-spectral data to radiance units.  <a href="#gae2618bba0ff8b50e380c740b81d6adf8"></a><br/></td></tr>
<tr class="separator:gae2618bba0ff8b50e380c740b81d6adf8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6fd2d45acff1c8042483a4dca9902019"><td class="memItemLeft" align="right" valign="top">conditionsFile&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___batch_renderer.html#ga6fd2d45acff1c8042483a4dca9902019">WriteConditionsFile</a> (conditionsFile, names, values)</td></tr>
<tr class="memdesc:ga6fd2d45acff1c8042483a4dca9902019"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write conditions data to a text file.  <a href="#ga6fd2d45acff1c8042483a4dca9902019"></a><br/></td></tr>
<tr class="separator:ga6fd2d45acff1c8042483a4dca9902019"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gababf809f1bdb7e2b3f84f927481acd22"><td class="memItemLeft" align="right" valign="top">mappingsFile&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___batch_renderer.html#gababf809f1bdb7e2b3f84f927481acd22">WriteDefaultMappingsFile</a> (colladaFile, mappingsFile, includeFile, reflectances, lightSpectra, excludePattern)</td></tr>
<tr class="memdesc:gababf809f1bdb7e2b3f84f927481acd22"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write a default mappings file for the given Collada scene file.  <a href="#gababf809f1bdb7e2b3f84f927481acd22"></a><br/></td></tr>
<tr class="separator:gababf809f1bdb7e2b3f84f927481acd22"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad61f5e17cd163940eaf3a1cfcf820102"><td class="memItemLeft" align="right" valign="top">mappedScene mappedAdjust resources&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___batch_renderer.html#gad61f5e17cd163940eaf3a1cfcf820102">WriteMappedSceneFiles</a> (workingPath, name, originalScene, originalAdjust, mappings, varNames, varValues, hints)</td></tr>
<tr class="memdesc:gad61f5e17cd163940eaf3a1cfcf820102"><td class="mdescLeft">&#160;</td><td class="mdescRight">Apply condition values and mappings to scene and adjustments files.  <a href="#gad61f5e17cd163940eaf3a1cfcf820102"></a><br/></td></tr>
<tr class="separator:gad61f5e17cd163940eaf3a1cfcf820102"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Render scenes multiple times with changing variables. </p>
<p>These functions make up the RenderToolox3 batch renderer, which can render the same basic scene multiple times, with changing variables. Users should not use most of these functions directly. Just use the <a class="el" href="group___batch_renderer.html#ga837670a7cb23d1a65124a69efb45bc71" title="Convert a Collada file to renderer scene files, with changing varibles.">MakeSceneFiles()</a>, <a class="el" href="group___batch_renderer.html#ga7e0dd5f1d0caa860e7bc12a6005bccbe" title="Render multiple scenes at once.">BatchRender()</a>, and <a class="el" href="group___batch_renderer.html#gaab50f49377da2cd26aae23a6f473b7b6" title="Condense several multi-spectral images into one sRGB montage.">MakeMontage()</a> functions. </p>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga6c290c8cff25bcfa2b66d4c1d846c48c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ApplySceneDOMPaths </td>
          <td>(</td>
          <td class="paramtype">idMap&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">mappings&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Modify a scene document with a mapping. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">idMap</td><td></td></tr>
    <tr><td class="paramname">mappings</td><td></td></tr>
  </table>
  </dd>
</dl>
<p>Modify the document represented by the given <em>idMap</em>, with the given <em>mappings</em>. <em>mappings</em> must be a struct array of mappings data as returned from <a class="el" href="group___batch_renderer.html#gad4aefeb241a41d1c6c9ba06c75835cc9" title="Read mappings data from a text file.">ParseMappings()</a>. The mappings should contain Scene DOM paths on the left-hand side.</p>
<p>Creates document nodes as needed, to satisfy the left-hand Scene DOM paths.</p>
<p>Used internally by <a class="el" href="group___batch_renderer.html#ga837670a7cb23d1a65124a69efb45bc71" title="Convert a Collada file to renderer scene files, with changing varibles.">MakeSceneFiles()</a>.</p>
<p>Usage: <a class="el" href="group___batch_renderer.html#ga6c290c8cff25bcfa2b66d4c1d846c48c" title="Modify a scene document with a mapping.">ApplySceneDOMPaths(idMap, mappings)</a> </p>

</div>
</div>
<a class="anchor" id="ga7e0dd5f1d0caa860e7bc12a6005bccbe"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">outFiles BatchRender </td>
          <td>(</td>
          <td class="paramtype">sceneFiles&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">hints&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Render multiple scenes at once. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sceneFiles</td><td>cell array of renderer-specific scene file names </td></tr>
    <tr><td class="paramname">hints</td><td>struct of RenderToolbox3 options, see <a class="el" href="group___batch_renderer.html#ga190c6aa944cd93e93e37b30295c68ac2" title="Get default hints to pass to the batch renderer.">GetDefaultHints()</a></td></tr>
  </table>
  </dd>
</dl>
<p>Renders multiple given scene files in one batch. <em>sceneFiles</em> should be a cell array of renderer-specific scene files, for example, as produced by <a class="el" href="group___batch_renderer.html#ga837670a7cb23d1a65124a69efb45bc71" title="Convert a Collada file to renderer scene files, with changing varibles.">MakeSceneFiles()</a>. All scene files should be intended for the same renderer, specified in <em>hints.renderer</em>.</p>
<p>Mitsuba scene files must be in Mitsuba's native .xml scene file format. PBRT scene files may be in PBRT's native text scene file format, or in RenderToolbox3's custom PBRT-XML format with the extension.</p>
<p><em>hints</em> may be a struct with options that affect the rendering process, as returned from <a class="el" href="group___batch_renderer.html#ga190c6aa944cd93e93e37b30295c68ac2" title="Get default hints to pass to the batch renderer.">GetDefaultHints()</a>. If <em>hints</em> is omitted, default options are used. For example:</p>
<ul>
<li><em>hints.renderer</em> specifies which renderer to use</li>
<li><em>hints.isParallel</em> specifies whether to render in a "parfor" loop</li>
<li><em>hints.outputDataFolder</em> specefies where to store multi-spectral data files.</li>
<li><em>hints.outputImageFolder</em> specifies where to store RGB image files.</li>
<li><em>hints.isDryRun</em> specefies whether or not to skip rendering</li>
</ul>
<p>Renders each scene specified in <em>sceneFiles</em>, and writes a .mat file each one. The .mat file will contain multi-spectral renderer output in two variables:</p>
<ul>
<li>multispectralImage - matrix of multispectral image data with size [height width n]</li>
<li>S - spectral plane description, [start delta n]</li>
</ul>
<p>where height and width are pixel image dimensions and n is the number of spectral bands in the image. See the RenderToolbox3 wikiw for more about <a href="https://github.com/DavidBrainard/RenderToolbox3/wiki/Spectrum-Bands">Spectrum Bands</a>.</p>
<p>The .mat file will also contain variables with data about how the scene was rendered:</p>
<ul>
<li>sceneFile - the the name of the scene file</li>
<li>hints - the given <em>hints</em> struct, or default hints struct</li>
<li>versionInfo - struct of version information about RenderToolbox3 and its dependencies</li>
<li>commandResult - text output from the shell command that invoked the renderer</li>
</ul>
<p>The multi-spectral data in each .mat file will be scaled into radiance units using funtions like <a class="el" href="group___batch_renderer.html#gae2618bba0ff8b50e380c740b81d6adf8" title="Convert PBRT multi-spectral data to radiance units.">PBRTDataToRadiance()</a> and <a class="el" href="group___batch_renderer.html#ga25c9b2e360c10155dbef957406a126ed" title="Convert Mitsuba multi-spectral data to radiance units.">MitsubaDataToRadiance()</a>. These rely on pre-computed renderer-specific scale factors computed in <a class="el" href="group___batch_renderer.html#ga549cc197fbfc7d88e081cfe1c70b7f77" title="Calculate scale factors to bring renderer outputs into radiance units.">ComputeRadiometricScaleFactors()</a>. The .mat file will also contain the radiometric scale factor that was used to convert data to radiance units:</p>
<ul>
<li>radiometricScaleFactor - scale factor that was used to bring renderer ouput into radiance units</li>
</ul>
<p>Returns a cell array of output .mat file names, with the same dimensions as the given <em>sceneFiles</em>.</p>
<p>Usage: outFiles = <a class="el" href="group___batch_renderer.html#ga7e0dd5f1d0caa860e7bc12a6005bccbe" title="Render multiple scenes at once.">BatchRender(sceneFiles, hints)</a> </p>

</div>
</div>
<a class="anchor" id="ga549cc197fbfc7d88e081cfe1c70b7f77"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pbrtScale mitsubaScale ComputeRadiometricScaleFactors </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calculate scale factors to bring renderer outputs into radiance units. </p>
<p>Calculates a radiometric unit scale factor to bring the "raw" output from each renderer into physical radiance units. Uses the ExampleScenes/RadiaceTest scene to generate renderings with known radiometric properties.</p>
<p>See the RenderToolbox3 wiki for details about &lt;a href="<a href="https://github.com/DavidBrainard/RenderToolbox3/wiki/RadianceTest'">https://github.com/DavidBrainard/RenderToolbox3/wiki/RadianceTest'</a>&gt;Radiometric Unit calculation.</p>
<p>Stores the calculated scale factors for each renderer, using the built-in setpref() function: </p>
<div class="fragment"><div class="line">setpref(<span class="stringliteral">&#39;RenderToolbox3&#39;</span>, <span class="stringliteral">&#39;PBRTRadiometricScale&#39;</span>, pbrtScale);</div>
<div class="line">setpref(<span class="stringliteral">&#39;RenderToolbox3&#39;</span>, <span class="stringliteral">&#39;MitsubaRadiometricScale&#39;</span>, mitsubaScale);</div>
</div><!-- fragment --><p> These persistent values may be modified with setpref(). They may be accessed with getpref() or <a class="el" href="group___batch_renderer.html#ga190c6aa944cd93e93e37b30295c68ac2" title="Get default hints to pass to the batch renderer.">GetDefaultHints()</a>.</p>
<p><a class="el" href="group___batch_renderer.html#gae2618bba0ff8b50e380c740b81d6adf8" title="Convert PBRT multi-spectral data to radiance units.">PBRTDataToRadiance()</a> and <a class="el" href="group___batch_renderer.html#ga25c9b2e360c10155dbef957406a126ed" title="Convert Mitsuba multi-spectral data to radiance units.">MitsubaDataToRadiance()</a> use the stored scale factors to convert renderer-specific ouput data into common radiance units. <a class="el" href="group___batch_renderer.html#ga7e0dd5f1d0caa860e7bc12a6005bccbe" title="Render multiple scenes at once.">BatchRender()</a> applies these conversions automatically.</p>
<p>Custom scale factors can be used instead of stored scale factors, if they are supplied in a hints struct. For example: </p>
<div class="fragment"><div class="line">hints.PBRTRadiometricScale = myPBRTScale;</div>
<div class="line">hints.MitsubaRadiometricScale = myMitsubaScale;</div>
<div class="line"><a class="code" href="group___batch_renderer.html#ga7e0dd5f1d0caa860e7bc12a6005bccbe" title="Render multiple scenes at once.">BatchRender</a>(..., hints);</div>
</div><!-- fragment --><p>Returns the computed PBRT and Mitsuba radiometric unit scale factors.</p>
<p>Usage: [pbrtScale, mitsubaScale] = <a class="el" href="group___batch_renderer.html#ga549cc197fbfc7d88e081cfe1c70b7f77" title="Calculate scale factors to bring renderer outputs into radiance units.">ComputeRadiometricScaleFactors()</a> </p>

</div>
</div>
<a class="anchor" id="ga190c6aa944cd93e93e37b30295c68ac2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">hints GetDefaultHints </td>
          <td>(</td>
          <td class="paramtype">hints&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get default hints to pass to the batch renderer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hints</td><td>struct of RenderToolbox3 options, see <a class="el" href="group___batch_renderer.html#ga190c6aa944cd93e93e37b30295c68ac2" title="Get default hints to pass to the batch renderer.">GetDefaultHints()</a></td></tr>
  </table>
  </dd>
</dl>
<p>Creates a struct of options for the batch renderer to use, or fills in missing parts of a the given <em>hints</em> struct. Batch renderer options include things like renderer name, image film size, and whether or not to delete intermediate files used in the batch rendering process.</p>
<p>If provided, <em>hints</em> should be a struct of renderer options with option names as fields. Fills in any missing options with default values. If <em>hints</em> is missing or not a struct, creates a new struct with all default values.</p>
<p>Default hint values can be set with Matlab's setpref() function. For example: </p>
<div class="fragment"><div class="line">% <span class="keywordflow">default</span> renderer to use</div>
<div class="line">setpref(<span class="stringliteral">&#39;RenderToolbox3&#39;</span>, <span class="stringliteral">&#39;renderer&#39;</span>, <span class="stringliteral">&#39;Mitsuba&#39;</span>);</div>
<div class="line">% or</div>
<div class="line">setpref(<span class="stringliteral">&#39;RenderToolbox3&#39;</span>, <span class="stringliteral">&#39;renderer&#39;</span>, <span class="stringliteral">&#39;PBRT&#39;</span>);</div>
<div class="line"></div>
<div class="line">% <span class="keywordflow">default</span> ouput image dimensions</div>
<div class="line">setpref(<span class="stringliteral">&#39;RenderToolbox3&#39;</span>, <span class="stringliteral">&#39;imageHeight&#39;</span>, 480);</div>
<div class="line">setpref(<span class="stringliteral">&#39;RenderToolbox3&#39;</span>, <span class="stringliteral">&#39;imageWidth&#39;</span>, 640);</div>
<div class="line"></div>
<div class="line">% review all the hints</div>
<div class="line">hints = <a class="code" href="group___batch_renderer.html#ga190c6aa944cd93e93e37b30295c68ac2" title="Get default hints to pass to the batch renderer.">GetDefaultHints</a>()</div>
</div><!-- fragment --><p>Returns a new or modified struct of batch renderer options.</p>
<p>Usage: hints = <a class="el" href="group___batch_renderer.html#ga190c6aa944cd93e93e37b30295c68ac2" title="Get default hints to pass to the batch renderer.">GetDefaultHints(hints)</a> Usage examples: </p>
<div class="fragment"><div class="line">hints = <a class="code" href="group___batch_renderer.html#ga190c6aa944cd93e93e37b30295c68ac2" title="Get default hints to pass to the batch renderer.">GetDefaultHints</a>(hints);</div>
<div class="line">hints.whichConditions = [1 3 5];</div>
<div class="line"><a class="code" href="group___batch_renderer.html#ga7e0dd5f1d0caa860e7bc12a6005bccbe" title="Render multiple scenes at once.">BatchRender</a>(..., hints);</div>
<div class="line"><a class="code" href="group___batch_renderer.html#gaab50f49377da2cd26aae23a6f473b7b6" title="Condense several multi-spectral images into one sRGB montage.">MakeMontage</a>(..., hints);</div>
</div><!-- fragment --> 
</div>
</div>
<a class="anchor" id="gaab50f49377da2cd26aae23a6f473b7b6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SRGBMontage XYZMontage MakeMontage </td>
          <td>(</td>
          <td class="paramtype">inFiles&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">outFile&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">toneMapFactor&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">isScale&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">hints&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Condense several multi-spectral images into one sRGB montage. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">inFiles</td><td>cell array of input .mat file names </td></tr>
    <tr><td class="paramname">outFile</td><td>output montage file name (optional) </td></tr>
    <tr><td class="paramname">toneMapFactor</td><td>how to truncate montage luminance (optional) </td></tr>
    <tr><td class="paramname">isScale</td><td>whether or not to scale montage luminance (optional) </td></tr>
    <tr><td class="paramname">hints</td><td>struct of RenderToolbox3 options, see <a class="el" href="group___batch_renderer.html#ga190c6aa944cd93e93e37b30295c68ac2" title="Get default hints to pass to the batch renderer.">GetDefaultHints()</a></td></tr>
  </table>
  </dd>
</dl>
<p>Condenses several multi-spectral images stored in .mat files into a single sRGB montage. Tiles the input images so that the montage has roughly the same aspect ratio as the input images.</p>
<p>Attempts to conserve system memory by loading only one multi-spectral image at a time.</p>
<p><em>inFiles</em> must be a cell array of .mat file names, each of which must contain multi-spectral renderer output. <a class="el" href="group___batch_renderer.html#ga7e0dd5f1d0caa860e7bc12a6005bccbe" title="Render multiple scenes at once.">BatchRender()</a> returns such a cell array.</p>
<p><em>outFile</em> determines the file name of the new montage. The file extension determines the file format:</p>
<ul>
<li>If the extension is '.mat', the montage XYZ and sRGB matrices are will be saved to a .mat data file.</li>
<li>If the extension matches a standard image format, like '.tiff' or '.png' (default), the sRGB image will be saved in that format, using Matlab's built-in imwrite().</li>
</ul>
<p><em>outFile</em> does not determine where the montage will be saved. If <em>hints</em> is provided and contains a <b>outputImageFolder</b> field, the montage will be saved in that folder. Otherwise, the montage will be saved in a default location given by: </p>
<div class="fragment"><div class="line">folder = getpref(<span class="stringliteral">&#39;RenderToolbox3&#39;</span>, <span class="stringliteral">&#39;outputImageFolder&#39;</span>)</div>
</div><!-- fragment --><p>If <em>toneMapFactor</em> is provided and greater than 0, montage luminances will be truncated above this factor times the mean luminance of the entire montage.</p>
<p>If isScale is provided and true, montage luminances will be scaled so that the maximum input luminance of the entire montage matches the maximum possible RGB output luminance.</p>
<p><em>hints</em> may be a struct with options that affect the montage, such as the output folder, as returned from <a class="el" href="group___batch_renderer.html#ga190c6aa944cd93e93e37b30295c68ac2" title="Get default hints to pass to the batch renderer.">GetDefaultHints()</a>. If <em>hints</em> is omitted, default options are used.</p>
<p>Returns a matrix containing the tone mapped, scaled, sRGB montage with size [height width 3]. Also returns a matrix containing XYZ image data with the same size.</p>
<p>Usage: [SRGBMontage, XYZMontage] = <a class="el" href="group___batch_renderer.html#gaab50f49377da2cd26aae23a6f473b7b6" title="Condense several multi-spectral images into one sRGB montage.">MakeMontage(inFiles, outFile, toneMapFactor, isScale, hints)</a> </p>

</div>
</div>
<a class="anchor" id="ga837670a7cb23d1a65124a69efb45bc71"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sceneFiles auxiliaryFiles MakeSceneFiles </td>
          <td>(</td>
          <td class="paramtype">colladaFile&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">conditionsFile&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">mappingsFile&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">hints&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">outPath&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convert a Collada file to renderer scene files, with changing varibles. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">colladaFile</td><td>file name or path of a Collada scene file </td></tr>
    <tr><td class="paramname">conditionsFile</td><td>file name or path of a conditions file </td></tr>
    <tr><td class="paramname">mappingsFile</td><td>file name or path of a mappings file </td></tr>
    <tr><td class="paramname">hints</td><td>struct of RenderToolbox3 options, see <a class="el" href="group___batch_renderer.html#ga190c6aa944cd93e93e37b30295c68ac2" title="Get default hints to pass to the batch renderer.">GetDefaultHints()</a> </td></tr>
    <tr><td class="paramname">outPath</td><td>path where to copy new scene files</td></tr>
  </table>
  </dd>
</dl>
<p>Creates multiple renderer-specific scene files, based on the given <em>colladaFile</em>, <em>conditionsFile</em>, and <em>mappingsFile</em>. <em>hints.renderer</em> specifies which renderer to make scene files for. <em>outPath</em> is optional, and may specify a folder path that should receive copies of the new scene files.</p>
<p><em>colladaFile</em> should be a Collada XML scene file. <em>colladaFile</em> may be left empty, if the <em>conditionsFile</em> contains a 'colladaFile' variable.</p>
<p><em>conditionsFile</em> must be a RenderToolbox3 <a href="https://github.com/DavidBrainard/RenderToolbox3/wiki/Conditions-File-Format">Conditions File</a>. <em>conditionsFile</em> may be omitted or left empty, if the scene is to be rendered only once.</p>
<p><em>mappingsFile</em> must be a RenderToolbox3 <a href="https://github.com/DavidBrainard/RenderToolbox3/wiki/Mappings-File-Format">Mappings File</a>. <em>mappingsFile</em> may be omitted or left empty, if the scene is to be rendered only once, or if the <em>conditionsFile</em> contains a 'mappingsFile' variable.</p>
<p><em>hints</em> may be a struct with options that affect the conversion process, as returned from <a class="el" href="group___batch_renderer.html#ga190c6aa944cd93e93e37b30295c68ac2" title="Get default hints to pass to the batch renderer.">GetDefaultHints()</a>. If <em>hints</em> is omitted, default options are used. For example:</p>
<ul>
<li><em>hints.renderer</em> specifies which renderer to make scene files for.</li>
<li><em>hints.tempFolder</em> is the default location for new scene files.</li>
<li><em>hints.adjustmentsFile</em> is a partial scene file with renderer-specific values</li>
<li><em>hints.filmType</em> is a renderer-specific film type to specify in the scene files.</li>
<li><em>hints.imageHeight</em> and <em>hints.imageWidth</em> specify the image pixel dimensions to specify in the scene files.</li>
<li><em>hints.whichConditions</em> is an array of condition numbers used to select lines from the <em>conditionsFile</em>.</li>
</ul>
<p><em>outPath</em> is optional. If provided, it should be the path to a folder where new scene files and auxiliary files should be copied. New scene files will also be written to <em>hints.tempFolder</em>.</p>
<p>Returns a cell array of file names for new renderer-specific scene files. By default, each scene file will have the same base name as <em>the</em> given <em>colladaFile</em>, plus a numeric suffix. If <em>conditionsFile</em> contains an 'imageName' variable, each scene file be named with the value of 'imageName'.</p>
<p>Also retrurns a cell array of file names for auxiliary files on which the scene files depend, like images, spectrum files, and geometry files.</p>
<p>For Mitsuba, renderer-specific scene files will be in Mitsuba's native .xml format. For PBRT, files will be in RenderToolbox3's custom PBRT-XML .xml format. PBRT-XML files can be converted to PBRT's native text format using <a class="el" href="group___collada_to_p_b_r_t.html#ga3799baf4496f0c4811dd32f629141a49" title="Convert a &quot;node&quot; node from a Collada document to a PBRT-XML document.">WritePBRTFile()</a>.</p>
<p>Usage: [sceneFiles, auxiliaryFiles] = <a class="el" href="group___batch_renderer.html#ga837670a7cb23d1a65124a69efb45bc71" title="Convert a Collada file to renderer scene files, with changing varibles.">MakeSceneFiles(colladaFile, conditionsFile, mappingsFile, hints, outPath)</a> </p>

</div>
</div>
<a class="anchor" id="ga25c9b2e360c10155dbef957406a126ed"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">radianceData scaleFactor MitsubaDataToRadiance </td>
          <td>(</td>
          <td class="paramtype">mitsubaData&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">mitsubaDoc&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">hints&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convert Mitsuba multi-spectral data to radiance units. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mitsubaData</td><td>"raw" data from a Mitsuba scene rendering </td></tr>
    <tr><td class="paramname">mitsubaDoc</td><td>XML DOM document node representing the Mitsuba scene </td></tr>
    <tr><td class="paramname">hints</td><td>struct of RenderToolbox3 options, see <a class="el" href="group___batch_renderer.html#ga190c6aa944cd93e93e37b30295c68ac2" title="Get default hints to pass to the batch renderer.">GetDefaultHints()</a></td></tr>
  </table>
  </dd>
</dl>
<p>Scales the given "raw" <em>mitsubaData</em> into physical radiance units. The scaling depends on a Mitsuba-specific scale factor computed previously with <a class="el" href="group___batch_renderer.html#ga549cc197fbfc7d88e081cfe1c70b7f77" title="Calculate scale factors to bring renderer outputs into radiance units.">ComputeRadiometricScaleFactors()</a>, and may also depend on particulars of the scene.</p>
<p><em>mitsubaData</em> should be a matrix of multi-spectral data obtained from the Mitsuba renderer, and read into Matlab with a function like <a class="el" href="group___readers.html#ga612881ed326c435e0d2edddee80e2268" title="Read an OpenEXR image with multiple spectral slices.">ReadMultispectralEXR()</a>. Each element of <em>mitsubaData</em> will be scaled into radiance units.</p>
<p><em>mitsubaDoc</em> should be the "document" node of the XML document that represents the rendered scene. Particulars of the scene specification might affect how <em>mitsubaData</em> is scaled.</p>
<p><em>hints</em> should be a struct with additional parameters used during rendering. In particular, <em>hints.MitsubaRadiometricScale</em> may contain the mitsuba-specific scale factor for converting multi-spectral data to radiance units. If <em>hints</em> does not contain this field, the default value will be taken from </p>
<div class="fragment"><div class="line">scaleFactor = getpref(<span class="stringliteral">&#39;RenderToolbox3&#39;</span>, <span class="stringliteral">&#39;MitsubaRadiometricScale&#39;</span>);</div>
</div><!-- fragment --><p>Returns the given "raw" <em>mitsubaData</em>, scaled into physical radiance units. Also returns the radiance scale factor that was used, which in some cases might differ from <em>hints.MitsubaRadiometricScale</em>.</p>
<p>Usage: [radianceData, scaleFactor] = <a class="el" href="group___batch_renderer.html#ga25c9b2e360c10155dbef957406a126ed" title="Convert Mitsuba multi-spectral data to radiance units.">MitsubaDataToRadiance(mitsubaData, mitsubaDoc, hints)</a> </p>

</div>
</div>
<a class="anchor" id="ga76d4597954b5a5fe4a41cfaa296c4063"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">names values ParseConditions </td>
          <td>(</td>
          <td class="paramtype">conditionsFile&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read conditions data from a text file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">conditionsFile</td><td></td></tr>
  </table>
  </dd>
</dl>
<p>Reads batch renderer condition variables from the given <em>conditionsFile</em>. See the RenderToolbox3 wiki for more about <a href="https://github.com/DavidBrainard/RenderToolbox3/wiki/Conditions-File-Format">Conditions Files</a>.</p>
<p>Returns a 1 x n cell array of string variable names from the first line of <em>conditionsFile</em>. Also returns an m x n cell array of varible values, with m values per variable.</p>
<p>Used internally by <a class="el" href="group___batch_renderer.html#ga837670a7cb23d1a65124a69efb45bc71" title="Convert a Collada file to renderer scene files, with changing varibles.">MakeSceneFiles()</a>.</p>
<p>Usage: [names, values] = <a class="el" href="group___batch_renderer.html#ga76d4597954b5a5fe4a41cfaa296c4063" title="Read conditions data from a text file.">ParseConditions(conditionsFile)</a> </p>

</div>
</div>
<a class="anchor" id="gad4aefeb241a41d1c6c9ba06c75835cc9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">mappings ParseMappings </td>
          <td>(</td>
          <td class="paramtype">mappingsFile&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read mappings data from a text file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mappingsFile</td><td></td></tr>
  </table>
  </dd>
</dl>
<p>Reads batch renderer mappings from the given <em>mappingsFile</em>. See the RenderToolbox3 wiki for more about <a href="https://github.com/DavidBrainard/RenderToolbox3/wiki/Mappings-File-Format">Mappings Files</a>.</p>
<p>Returns a 1xn struct array with mapping data. The struct array will have one element per mapping, and the following fields:</p>
<ul>
<li>text - raw text before parsing</li>
<li>blockType - block type, 'Collada', 'Generic', 'Mitsuba', or 'PBRT'</li>
<li>blockNumber - the order of the block in the mappings file</li>
<li>group - name of a set of related blocks</li>
<li>left - a struct of info about the left-hand string</li>
<li>operator - the operator string</li>
<li>right - a struct of info about the right-hand string</li>
</ul>
<p>Each 'left' or 'right' field will contain a struct with data about a string, with the following fields</p>
<ul>
<li>text - the raw text before parsing</li>
<li>enclosing - the enclosing brackets, if any, '[]', '&lt;&gt;', or ''</li>
<li>value - the text found within enclising brackets</li>
</ul>
<p>Used internally by <a class="el" href="group___batch_renderer.html#ga837670a7cb23d1a65124a69efb45bc71" title="Convert a Collada file to renderer scene files, with changing varibles.">MakeSceneFiles()</a>.</p>
<p>Usage: mappings = <a class="el" href="group___batch_renderer.html#gad4aefeb241a41d1c6c9ba06c75835cc9" title="Read mappings data from a text file.">ParseMappings(mappingsFile)</a> </p>

</div>
</div>
<a class="anchor" id="gae2618bba0ff8b50e380c740b81d6adf8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">radianceData scaleFactor PBRTDataToRadiance </td>
          <td>(</td>
          <td class="paramtype">pbrtData&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pbrtDoc&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">hints&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convert PBRT multi-spectral data to radiance units. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pbrtData</td><td>"raw" data from a PBRT scene rendering </td></tr>
    <tr><td class="paramname">pbrtDoc</td><td>XML DOM document node representing the PBRT scene </td></tr>
    <tr><td class="paramname">hints</td><td>struct of RenderToolbox3 options, see <a class="el" href="group___batch_renderer.html#ga190c6aa944cd93e93e37b30295c68ac2" title="Get default hints to pass to the batch renderer.">GetDefaultHints()</a></td></tr>
  </table>
  </dd>
</dl>
<p>Scales the given "raw" <em>pbrtData</em> into physical radiance units. The scaling depends on a PBRT-specific scale factor computed previously with <a class="el" href="group___batch_renderer.html#ga549cc197fbfc7d88e081cfe1c70b7f77" title="Calculate scale factors to bring renderer outputs into radiance units.">ComputeRadiometricScaleFactors()</a>, and may also depend on particulars of the scene.</p>
<p><em>pbrtData</em> should be a matrix of multi-spectral data obtained from the PBRT renderer, and read into Matlab with a function like <a class="el" href="group___readers.html#ga3e3389b35714ba0a7afac464401738a2" title="Get multispectral image data out of a .dat file from Stanford.">ReadDAT()</a>. Each element of <em>pbrtData</em> will be scaled into radiance units.</p>
<p><em>pbrtDoc</em> should be the "document" node of the XML document that represents the rendered scene. Particulars of the scene specification might affect how <em>pbrtData</em> is scaled.</p>
<p><em>hints</em> should be a struct with additional parameters used during rendering. In particular, <em>hints.PBRTRadiometricScale</em> may contain the PBRT-specific scale factor for converting multi-spectral data to radiance units. If <em>hints</em> does not contain this field, the default value will be taken from </p>
<div class="fragment"><div class="line">scaleFactor = getpref(<span class="stringliteral">&#39;RenderToolbox3&#39;</span>, <span class="stringliteral">&#39;PBRTRadiometricScale&#39;</span>);</div>
</div><!-- fragment --><p>Returns the given "raw" <em>pbrtData</em>, scaled into physical radiance units. Also returns the radiance scale factor that was used, which in some cases might differ from <em>hints.PBRTRadiometricScale</em>.</p>
<p>Usage: [radianceData, scaleFactor] = <a class="el" href="group___batch_renderer.html#gae2618bba0ff8b50e380c740b81d6adf8" title="Convert PBRT multi-spectral data to radiance units.">PBRTDataToRadiance(pbrtData, pbrtDoc, hints)</a> </p>

</div>
</div>
<a class="anchor" id="ga6fd2d45acff1c8042483a4dca9902019"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">conditionsFile WriteConditionsFile </td>
          <td>(</td>
          <td class="paramtype">conditionsFile&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">names&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">values&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write conditions data to a text file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">conditionsFile</td><td>name of new text file to write. </td></tr>
    <tr><td class="paramname">names</td><td>1 x n cell array of string variable names </td></tr>
    <tr><td class="paramname">values</td><td>m x n cell array of variable values</td></tr>
  </table>
  </dd>
</dl>
<p>Writes batch renderer condition variables with the given <em>names</em> and <em>values</em> to a new text file with the given <em>conditionsFile</em> name. See the RenderToolbox3 wiki for more about <a href="https://github.com/DavidBrainard/RenderToolbox3/wiki/Conditions-File-Format">Conditions Files</a>.</p>
<p><em>names</em> will appear in the first line of the new file, separated by tabs. Each of the m rows of <em>values</em> will appear in a separate line, with elements separated by tabs. So, the values for each variable will appear in a tab-separated column.</p>
<p>Attempts to convert numeric values to string, as needed.</p>
<p>Usage: conditionsFile = <a class="el" href="group___batch_renderer.html#ga6fd2d45acff1c8042483a4dca9902019" title="Write conditions data to a text file.">WriteConditionsFile(conditionsFile, names, values)</a> </p>

</div>
</div>
<a class="anchor" id="gababf809f1bdb7e2b3f84f927481acd22"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">mappingsFile WriteDefaultMappingsFile </td>
          <td>(</td>
          <td class="paramtype">colladaFile&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">mappingsFile&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">includeFile&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">reflectances&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">lightSpectra&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">excludePattern&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write a default mappings file for the given Collada scene file. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">colladaFile</td><td>file name or path of the Collada scene file </td></tr>
    <tr><td class="paramname">mappingsFile</td><td>file name or path for a new mappings file </td></tr>
    <tr><td class="paramname">includeFile</td><td>file name or path for a mappings file to include </td></tr>
    <tr><td class="paramname">reflectances</td><td>cell array of matte material reflectances </td></tr>
    <tr><td class="paramname">lightSpectra</td><td>cell array of light source spectra </td></tr>
    <tr><td class="paramname">excludePattern</td><td>regular expression to filter document elements</td></tr>
  </table>
  </dd>
</dl>
<p>Traverses the Collada document in the given <em>colladaFile</em> and writes a new <em>mappingsFile</em> suitable for use with <a class="el" href="group___batch_renderer.html#ga7e0dd5f1d0caa860e7bc12a6005bccbe" title="Render multiple scenes at once.">BatchRender()</a>. The <em>mappingsFile</em> will specify default values, including:</p>
<ul>
<li>mappings text in <em>includeFile</em> or RenderData/DefaultMappings.txt</li>
<li>matte material for each geometry node</li>
<li>a spectrum for each light source</li>
</ul>
<p>Each material or light source will use a spectrum from a default list, or a provided list.</p>
<p>By default, prepends the text of RenderData/DefaultMappings.txt to the new mappings file. If <em>includeFile</em> is provided it must specify another text file to prepend instead.</p>
<p>By default, each matte material will use one of the Color Checker reflectance spectrums found in RenderData/Macbeth-ColorChecker. If <em>reflectances</em> is provided, it must be a cell array of string reflectance values to use instead.</p>
<p>By default, each light source will use the D65 light spectrum found in RenderData/D65.spd. If <em>lightSpectra</em> is provided, it must be a cell array of string spectrum values to use instead.</p>
<p>By default, writes mappings for all materials and light sources. If <em>excludePattern</em> is provided, it must be a regular expression to match against element id attributes. Elements whose ids match <em>excludePattern</em> will be excluded from the <em>mappingsFile</em>.</p>
<p>Returns the name of the new <em>mappingsFile</em>.</p>
<p>Usage: <a class="el" href="group___batch_renderer.html#gababf809f1bdb7e2b3f84f927481acd22" title="Write a default mappings file for the given Collada scene file.">WriteDefaultMappingsFile(colladaFile, mappingsFile, includeFile, reflectances, lightSpectra, excludePattern)</a> </p>

</div>
</div>
<a class="anchor" id="gad61f5e17cd163940eaf3a1cfcf820102"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">mappedScene mappedAdjust resources WriteMappedSceneFiles </td>
          <td>(</td>
          <td class="paramtype">workingPath&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">name&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">originalScene&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">originalAdjust&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">mappings&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">varNames&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">varValues&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">hints&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Apply condition values and mappings to scene and adjustments files. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">workingPath</td><td></td></tr>
    <tr><td class="paramname">name</td><td></td></tr>
    <tr><td class="paramname">originalScene</td><td></td></tr>
    <tr><td class="paramname">originalAdjust</td><td></td></tr>
    <tr><td class="paramname">mappings</td><td></td></tr>
    <tr><td class="paramname">varNames</td><td></td></tr>
    <tr><td class="paramname">varValues</td><td></td></tr>
  </table>
  </dd>
</dl>
<p>Apply variable values and mappings to scene and adjustments files.</p>
<p><em>workingPath</em> must be a folder path name where to put new files. <em>name</em> must be a string name to include in the mapped scene file names.</p>
<p><em>originalScene</em> and <em>originalAdjust</em> must be XML scene and adjustments files, respectively. <em>originalAdjust</em> is optional.</p>
<p>mappings must be a struct array of mapping data as returned from <a class="el" href="group___batch_renderer.html#gad4aefeb241a41d1c6c9ba06c75835cc9" title="Read mappings data from a text file.">ParseMappings()</a>.</p>
<p><em>varNames</em> and <em>varValues</em> must be cell arrays of variable names and corresponding values, as returned from <a class="el" href="group___batch_renderer.html#ga76d4597954b5a5fe4a41cfaa296c4063" title="Read conditions data from a text file.">ParseConditions()</a>.</p>
<p><em>hints</em> should be a struct with renderer options. <em>hints.renderer</em> should be the name of a renderer, either 'Mitsuba', or 'PBRT'.</p>
<p>Writes copies of the given <em>originalScene</em> file and <em>originalAdjustments</em> file, and modifies each as specified by the given <em>mappings</em>, <em>varNames</em>, and <em>varValues</em>.</p>
<p>Returns the names of the new, mapped scene file and the new, mapped adjustments file. Also returns a cell array of file names for resources specified in mappings, such as image files and spectrum files.</p>
<p>Used internally by <a class="el" href="group___batch_renderer.html#ga837670a7cb23d1a65124a69efb45bc71" title="Convert a Collada file to renderer scene files, with changing varibles.">MakeSceneFiles()</a>.</p>
<p>Usage: [mappedScene, mappedAdjust, resources] = WriteMappedSceneFiles( ... workingPath, name, originalScene, originalAdjust, ... mappings, varNames, varValues, hints) </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu May 2 2013 13:17:15 for Render Toolbox 3 by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.2
</small></address>
</body>
</html>
